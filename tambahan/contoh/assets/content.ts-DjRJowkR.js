(function(){console.log("Token Extractor Content Script Loaded");chrome.runtime.onMessage.addListener((t,e,a)=>{t.action==="PASTE_TOKEN"?i(t.token):t.action==="PASTE_COOKIES"&&i(t.text)});async function i(t){var e,a;try{console.log("Received token, attempting to paste...");try{await navigator.clipboard.writeText(t),console.log("Token copied to clipboard")}catch(o){console.warn("Clipboard access failed (user interaction needed usually)",o)}const n=document.querySelector("textarea");if(n){n.value=t,n.dispatchEvent(new Event("input",{bubbles:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})),console.log("Injected into textarea");return}const c=document.querySelector('[contenteditable="true"]');if(c){c.focus(),document.execCommand("selectAll",!1,void 0),document.execCommand("insertText",!1,t),console.log("Injected into contenteditable");return}if(document.querySelector(".view-line")){const o=new ClipboardEvent("paste",{bubbles:!0,cancelable:!0,clipboardData:new DataTransfer});(e=o.clipboardData)==null||e.setData("text/plain",t),(a=document.activeElement)==null||a.dispatchEvent(o),console.log("Dispatched paste event to active element")}r("Token Updated via Extension")}catch(n){console.error("Error handling paste:",n)}}function r(t){const e=document.createElement("div");e.style.position="fixed",e.style.bottom="20px",e.style.right="20px",e.style.backgroundColor="#10B981",e.style.color="white",e.style.padding="10px 20px",e.style.borderRadius="8px",e.style.zIndex="999999",e.style.fontFamily="sans-serif",e.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)",e.innerText=t,document.body.appendChild(e),setTimeout(()=>e.remove(),3e3)}
})()
